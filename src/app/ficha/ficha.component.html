<div class="container-geral-row">
  <div class="container-geral-left">

    <div class="container-foto-vida-engeria">


      <div class="container-foto" (click)="abrirSeletorDeImagem()">
        @if (imagemCortada()) {
        <img [src]="imagemCortada()" alt="Foto do Personagem" />
        } @else {
        <div class="container-foto-icon">
          <span class="pi pi-user"></span>
        </div>
        }
      </div>

      <input type="file" #fileInput hidden (change)="selecionarImagem($event)" accept="image/*" />

      <div class="container-vida-energia">

        <div>Vida</div>
        <div class="row-progressbar">
          <span class="pi pi-angle-double-left" (click)="removePontosVidaMax()"></span>
          <span class="pi pi-angle-left" (click)="removePontosVida()"></span>
          <p-progressbar class="w-full" color="red" [value]="(vidaatual / maxvida) * 100">
            <ng-template #content let-value>
              <span>{{ vidaatual }}/{{ maxvida }}</span>
            </ng-template>
          </p-progressbar>
          <span class="pi pi-angle-right" (click)="addPontosVida()"></span>
          <span class="pi pi-angle-double-right" (click)="addPontosVidaMax()"></span>
        </div>

        <div>Energia</div>
        <div class="row-progressbar">
          <span class="pi pi-angle-double-left" (click)="removePontosManaMax()"></span>
          <span class="pi pi-angle-left" (click)="removePontosMana()"></span>
          <p-progressbar class="w-full" color="rgb(74, 183, 255)" [value]="(manaatual / maxmana) * 100">
            <ng-template #content let-value>
              <span>{{ manaatual }}/{{ maxmana }}</span>
            </ng-template>
          </p-progressbar>
          <span class="pi pi-angle-right" (click)="addPontosMana()"></span>
          <span class="pi pi-angle-double-right" (click)="addPontosManaMax()"></span>
        </div>

      </div>
    </div>

    <div class="container-tabs ">
      <div class="container-inventario">
        <label>Ca:</label>
        <input type="text" class="input-padrao" [(ngModel)]="defesa">
        <div>Inventario:</div>
        <textarea type="text" class="input-textarea" [(ngModel)]="inventario"></textarea>
      </div>
      <div class="container-pericias">
        @for (pericia of listaPericia; track pericia.id) {
        <div class="row-pericia" (click)="addPontosPericia(pericia)"
          (contextmenu)="removePontosPericia($event, pericia)">
          <div>{{ pericia.nome }}</div>
          <div>{{ pericia.pontos }}</div>
        </div>
        }
      </div>
    </div>
  </div>

  <div class="container-geral-rigth">

    <div class="container-form-atrib">

      <form class="container-form" [formGroup]="form">
        <div>
          <label class="label-padrao">Nome:</label>
          <input type="text" class="input-padrao" formControlName="nome">
        </div>
        <div class="container-raca">
          <label class="">Raça:</label>
          <p-select size="small" [options]="listaRaca" 
            optionLabel="nome" placeholder="Selecione a Raça"  
            formControlName="raca"
          />
        </div>
        <div>
          <label class="label-padrao">Level:</label>
          <input type="text" class="input-padrao" formControlName="level">
        </div>
        <div class="container-textarea">
          <label class="label-padrao">Características:</label>
          <textarea type="text" class="input-textarea" formControlName="caracteristicas"></textarea>
        </div>
      </form>

      <div class="container-atributos-img">

        <div class="container-atributos">

          <div class="container-for-int">
            <div class="hexagon-borda">
              <div class="hexagon-background flex-col " (click)="addPontosAtributo(atributoEnum.Forca)"
                (contextmenu)="removePontosAtributo($event, atributoEnum.Forca)">
                <div class="text-2xl">
                  {{ atributos.forca }}
                </div>
                <div>for</div>
              </div>
            </div>
            <div class="hexagon-borda">
              <div class="hexagon-background flex-col " (click)="addPontosAtributo(atributoEnum.Intelecto)"
                (contextmenu)="removePontosAtributo($event, atributoEnum.Intelecto)">
                <div class="text-2xl">
                  {{ atributos.intelecto }}
                </div>
                <div>int</div>
              </div>
            </div>
          </div>
          <div class="container-agi-pow">
            <div class="hexagon-borda">
              <div class="hexagon-background flex-col " (click)="addPontosAtributo(atributoEnum.Agilidade)"
                (contextmenu)="removePontosAtributo($event, atributoEnum.Agilidade)">
                <div class="text-2xl">
                  {{ atributos.agilidade }}
                </div>
                <div>AGI</div>
              </div>
            </div>
            <div class="circle">Atributos</div>
            <div class="hexagon-borda">
              <div class="hexagon-background flex-col " (click)="addPontosAtributo(atributoEnum.Poder)"
                (contextmenu)="removePontosAtributo($event, atributoEnum.Poder)">
                <div class="text-2xl">
                  {{ atributos.poder }}
                </div>
                <div>POD</div>
              </div>
            </div>
          </div>
          <div class="container-res-san">
            <div class="hexagon-borda">
              <div class="hexagon-background flex-col " (click)="addPontosAtributo(atributoEnum.Resistencia)"
                (contextmenu)="removePontosAtributo($event, atributoEnum.Resistencia)">
                <div class="text-2xl">
                  {{ atributos.resistencia }}
                </div>
                <div>RES</div>
              </div>
            </div>
            <div class="hexagon-borda">
              <div class="hexagon-background flex-col " (click)="addPontosAtributo(atributoEnum.Sanidade)"
                (contextmenu)="removePontosAtributo($event, atributoEnum.Sanidade)">
                <div class="text-2xl">
                  {{ atributos.sanidade }}
                </div>
                <div>SAN</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-geral-bottom">
      <div class="container-sing-caminho-arquetpo">

        <div class="container-caminho">
          <div>
            <label class="label-padrao">Caminhos:</label>
            <p-select class="w-full max-w-full" size="small" [options]="listaCaminho" optionLabel="nome"
              (onChange)="selectCaminho()" placeholder="Selecione um Caminho" [(ngModel)]="caminho" />
          </div>
          <div class="content-caminho ">
            <div class="title">Caminhos Escolidos:</div>
            @for (caminho of listaCaminhoSelecionado; track $index) {
            <div class="row-caminho">
              <span>{{ caminho.nome }}</span>
              <p-button icon="pi pi-times" [rounded]="true" [text]="true" severity="danger" click
                (click)="removeCaminho(caminho)" />
            </div>
            }
          </div>
        </div>

        <div class="container-arquetipo">
          <div>
            <label class="label-padrao">Arquetipos:</label>
            <p-select class="w-full" size="small" [options]="listaCaminhoArquetipo" optionLabel="nome"
              (onChange)="selectArquetipo()" placeholder="Selecione um Arquetipos" [(ngModel)]="arquetipo" />
          </div>
          <div class="content-arquetipo">
            <div class="title">Arquetipos Escolidos:</div>
            @for (arquetipo of listaArquetipoSelecionado; track $index) {
            <div class="row-caminho">
              <span>{{ arquetipo.nome }}</span>
              <p-button icon="pi pi-times" [rounded]="true" [text]="true" severity="danger" click
                (click)="removeArquetipo(arquetipo)" />
            </div>
            }
          </div>
        </div>

        <div class="container-singularidade">
          <label>SINGULARIDADE:</label>
          <textarea type="text" class="input-textarea"></textarea>
          <p-button class="btn-salvar-personagem" styleClass="w-full" label="Salvar" (onClick)="salvarPersonagem()"/>
        </div>
      </div>
    </div>

  </div>
</div>
